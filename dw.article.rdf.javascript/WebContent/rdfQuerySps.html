<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF8">
  <title>Registry Services - Javascript sample using JQuery</title>
  <script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
  <script type="text/javascript" src="js/jquery.rdfquery.core.min-1.0.js"></script>
  
  <style media="screen" type="text/css">
	#providers
	{
	font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;
	text-align:left;
	width:100%;
	border-collapse:collapse;
	}

	#providers td, #providers th 
	{
	border:1px solid #999;
	padding:3px 7px 2px 7px;
	}

	#providers th 
	{
	background-color:#ddd;
	color:#333;
	font-size:110%;
	}
	
	.rdfquerybug
	{
	vertical-align: super;
	font-size: 50%;
	}
  </style>
</head>
<body>

	<table id="providers">
		<thead>
			<tr>
				<th>Title
					<span class="rdfquerybug"><a href='http://code.google.com/p/rdfquery/issues/detail?id=17' 
					title="Known RDFQuery problem in some browsers: RDF/XML Parser Fails to Parse XMLLiteral Outter Text Nodes">
					1</a></span>
				</th>
				<th>Description
					<span class="rdfquerybug"><a href='http://code.google.com/p/rdfquery/issues/detail?id=17' 
					title="Known RDFQuery problem in some browsers: RDF/XML Parser Fails to Parse XMLLiteral Outter Text Nodes">
					1</a></span>
				</th>
				<th>URL</th>
			</tr>
		</thead>
	    <tbody id="providersData">
	    </tbody>
	</table>

	<script type="text/javascript">
		$.ajax({
			url : '/oslc/pr/collection?oslc.select=*',
			success : function(data, textStatus, jqXHR) {
				spRdf = $.rdf().load(data, {});
				spRdf
				  .prefix('oslc', 'http://open-services.net/ns/core#"')
				  .prefix('dcterms', 'http://purl.org/dc/terms/')
				  .where("?s a <http://open-services.net/ns/core#ServiceProvider>")
				  .where("?s dcterms:title ?title")
				  .where("?s dcterms:description ?description")
				  .each(function () {
				    var 
				      title = this.title === undefined ? 'No title' : this.title.value,
					  description = this.description === undefined ? 'No description' : this.description.value,
                      spUrl = this.s.value;

					  $("#providersData")
					    .append("<tr>" +
						    "<td>" + title + "</td>" +
						    "<td>" + description + "</td>" + 
						    "<td><a href='" + spUrl + "'>" + spUrl + "</a></td>" + 
							"</tr>");
				  });
			},

			dataType : "xml"
		});
	</script>
</body>
</html>